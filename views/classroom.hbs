<link rel="stylesheet" type="text/css" href="/stylesheets/home.css"/>
<link rel="stylesheet" type="text/css" href="/stylesheets/class.css"/>
<script type="text/javascript" src="/javascripts/endMan.js"></script>
{{#if error}}
    <div class="alert alert-danger" role="alert">
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        <span class="sr-only">Error:</span>
      {{error}}
    </div>
{{/if}}

<div class="header">
	<div class="container">
		<div class="col-md-12">
			<h1>{{name}}</h1>
			<h3>At {{college}}</h3>
      <a href="/home"><h5>Go Home</h5></a>
		</div>
	</div>
</div>

<div class="main">
	<div class="container">
		<div class="col-md-12">
    <h1 class="secondTitle" id="class" classId = "{{classId}}">Assignments</h1>
    {{#if assignments}}


    <div class="panel-group" id="accordian">

    {{#each assignments}}


    <center>
      <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordian" href="#collapse{{assignment._id}}">{{assignment.assignment.name}}</a>
          </h4>
      </div>

      <div id="collapse{{assignment._id}}" class="panel-collapse collapse">
      <div class="panel-body">
        <h3>{{assignment.assignment.name}}</h3>
         <h4>Due Date: {{assignment.assignment.expireAt}}</h4>
         <h5>Weight: {{assignment.assignment.weight}}</h5>
         <h5>ExtraCredit in Circulation: {{assignment.assignment.extraCredit}}</h5>
         {{#if assignment.assignment.active}}
          <h6 class="active">Active</h6>
          <button class="end_assignment" assignId="{{assignment.assignment._id}}" >End Assignment Manually</button>

             <div>
             <hr>
             <h4>Add Gronks</h4>
             <center>
            {{#each days}}
         
            <div class="gronk">
            {{#if active}}
            <a href="/day/{{_id}}"><h5>Day: {{number}}</h5></a>
            
            {{else}}
            <h5>Day: {{number}}</h5>
            <h6>{{extraCredit}} Gronks Generated</h6>

            </div>
           

            {{/if}}
          
            {{/each}}
            </center>
      </div>
         {{else}}
          <h6>Not Active</h6>
          <a href="/assignments/{{assignment._id}}"><h6>Price</h6></a>

         {{/if}}
      </div>
      </div>  
      </div>
      </center>
    {{/each}}

    </div>
    <center>
        <button class="btn btn-default assignmentAdd" type="button" data-toggle="modal" data-target="#myModal">Add Assignment</button>
    </center>

    {{else}}
		<center>
		<h2>You Have No Assignments</h2>
		<button class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">Add Assignment</button>
		</center>

    {{/if}}
		</div>
	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Create Assignment</h4>
      </div>
      <div class="modal-body">
        <form method="POST">
        <div class="form-group">
        	<label>Name</label>
        	<input type="text" name="assignName" class="form-control">
        </div>

        <div class="form-group">
        	<label>Due Date</label>
        	<input type="Date" name="assignDate" class="form-control">
        </div>

        <div class="form-group">
        	<label>Add Class Days</label>
        	<p>Enter in the Number of Class Days to be Associated with this Assignment</p>
        	<input type="Number" name="assignDays" class="form-control">
        </div>

        <div class="form-group">
        	<label>Assignment Weight (Out of 1)</label>
        	<input type="Number" step="0.01" class="form-control" name="assignWeight">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Create Assignment</button>
      	</form>
      </div>
    </div>
  </div>
</div>